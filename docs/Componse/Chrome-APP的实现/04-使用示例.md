# Chrome App Mode ä½¿ç”¨ç¤ºä¾‹

## åŸºç¡€ä½¿ç”¨

### 1. å¯åŠ¨æ¡Œé¢ç«¯

```bash
# å¯åŠ¨æ¡Œé¢æœåŠ¡å¹¶æ‰“å¼€çª—å£
tm desktop start

# è¾“å‡ºï¼š
# âœ… Desktop server started at http://localhost:9527
# ğŸš€ æ­£åœ¨æ‰“å¼€ Chrome App çª—å£...
```

**æ•ˆæœï¼š**
- å¯åŠ¨ Express æœåŠ¡å™¨ï¼ˆç«¯å£ 9527ï¼‰
- è‡ªåŠ¨æ‰“å¼€ Chrome App çª—å£
- æ˜¾ç¤ºç©ºç™½ç­‰å¾…çŠ¶æ€

---

### 2. æ˜¾ç¤º TODO åˆ—è¡¨

```bash
# åœ¨ç»ˆç«¯æ˜¾ç¤ºï¼ˆé»˜è®¤ï¼‰
tm list

# åœ¨æ¡Œé¢ç«¯æ˜¾ç¤º
tm list --board
```

**æ•ˆæœï¼š**
- Chrome çª—å£è‡ªåŠ¨åˆ‡æ¢åˆ° TODO è§†å›¾
- æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡çš„çœ‹æ¿ç•Œé¢
- æ”¯æŒæŒ‰çŠ¶æ€ã€ä¼˜å…ˆçº§åˆ†ç»„

---

### 3. æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…

```bash
# åœ¨ç»ˆç«¯æ˜¾ç¤º
tm show 15

# åœ¨æ¡Œé¢ç«¯æ˜¾ç¤º
tm show 15 --visual
```

**æ•ˆæœï¼š**
- æ˜¾ç¤ºä»»åŠ¡çš„å®Œæ•´ä¿¡æ¯
- åŒ…æ‹¬æè¿°ã€ä¾èµ–ã€å­ä»»åŠ¡ç­‰
- æ”¯æŒ Markdown æ¸²æŸ“

---

### 4. æ˜¾ç¤ºå›¾ç‰‡

```bash
# æ˜¾ç¤ºæˆªå›¾
tm show screenshot.png --visual

# æ˜¾ç¤ºè®¾è®¡ç¨¿
tm show design.jpg --visual
```

**æ•ˆæœï¼š**
- åœ¨æ¡Œé¢ç«¯æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ
- æ”¯æŒç¼©æ”¾ã€å…¨å±æŸ¥çœ‹
- æ˜¾ç¤ºå›¾ç‰‡å…ƒä¿¡æ¯

---

### 5. ä»£ç å¯¹æ¯”

```bash
# å¯¹æ¯”æ–‡ä»¶ä¿®æ”¹
tm diff main.js --visual

# å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶
tm diff old.js new.js --visual
```

**æ•ˆæœï¼š**
- å¹¶æ’æ˜¾ç¤ºä¿®æ”¹å‰åçš„ä»£ç 
- é«˜äº®æ˜¾ç¤ºå·®å¼‚éƒ¨åˆ†
- æ”¯æŒè¯­æ³•é«˜äº®

---

### 6. åœæ­¢æ¡Œé¢ç«¯

```bash
tm desktop stop

# è¾“å‡ºï¼š
# Desktop server stopped
```

**æ•ˆæœï¼š**
- å…³é—­ Express æœåŠ¡å™¨
- Chrome çª—å£å¯ä»¥æ‰‹åŠ¨å…³é—­

---

## å®é™…åœºæ™¯ç¤ºä¾‹

### åœºæ™¯ 1: æŸ¥çœ‹ä»»åŠ¡è¿›åº¦

```bash
# 1. å¯åŠ¨æ¡Œé¢ç«¯
tm desktop start

# 2. æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
tm list --board

# 3. æŸ¥çœ‹ç‰¹å®šä»»åŠ¡è¯¦æƒ…
tm show 15 --visual

# 4. æ ‡è®°ä»»åŠ¡å®Œæˆ
tm set-status --id=15 --status=done

# 5. å†æ¬¡æŸ¥çœ‹ï¼ˆè‡ªåŠ¨åˆ·æ–°ï¼‰
tm list --board
```

---

### åœºæ™¯ 2: ä»£ç å®¡æŸ¥

```bash
# 1. å¯åŠ¨æ¡Œé¢ç«¯
tm desktop start

# 2. æŸ¥çœ‹ä»£ç å˜æ›´
git diff main.js > /tmp/diff.txt
tm show /tmp/diff.txt --visual

# 3. å¯¹æ¯”ä¸¤ä¸ªåˆ†æ”¯
tm diff main feature/new-ui --visual

# 4. æŸ¥çœ‹æ–‡ä»¶å†å²
tm show main.js --history --visual
```

---

### åœºæ™¯ 3: è®¾è®¡ç¨¿é¢„è§ˆ

```bash
# 1. å¯åŠ¨æ¡Œé¢ç«¯
tm desktop start

# 2. é¢„è§ˆè®¾è®¡ç¨¿
tm show designs/homepage.png --visual

# 3. æ‰¹é‡é¢„è§ˆ
for file in designs/*.png; do
  tm show "$file" --visual
  sleep 3
done
```

---

### åœºæ™¯ 4: æ–‡æ¡£æŸ¥çœ‹

```bash
# 1. å¯åŠ¨æ¡Œé¢ç«¯
tm desktop start

# 2. æŸ¥çœ‹ Markdown æ–‡æ¡£
tm show README.md --visual

# 3. æŸ¥çœ‹ PRD
tm show docs/prd.md --visual

# 4. æŸ¥çœ‹ API æ–‡æ¡£
tm show docs/api.md --visual
```

---

## é«˜çº§ç”¨æ³•

### 1. è‡ªåŠ¨å¯åŠ¨

```bash
# åœ¨ä»»ä½•å‘½ä»¤ä¸­è‡ªåŠ¨å¯åŠ¨æ¡Œé¢ç«¯
tm list --board
# å¦‚æœæ¡Œé¢ç«¯æœªè¿è¡Œï¼Œä¼šè‡ªåŠ¨å¯åŠ¨

tm show 15 --visual
# åŒæ ·ä¼šè‡ªåŠ¨å¯åŠ¨
```

**å®ç°åŸç†ï¼š**
```javascript
async function ensureDesktopRunning() {
  if (!desktopManager.isRunning) {
    console.log('ğŸš€ å¯åŠ¨æ¡Œé¢ç«¯...');
    desktopManager.start();
    await new Promise(resolve => setTimeout(resolve, 1000));
  }
}
```

---

### 2. çª—å£æ§åˆ¶

```bash
# æŒ‡å®šçª—å£å¤§å°
tm desktop start --size=1200x800

# æŒ‡å®šçª—å£ä½ç½®
tm desktop start --position=100,100

# å…¨å±å¯åŠ¨
tm desktop start --fullscreen
```

---

### 3. å¤šçª—å£æ¨¡å¼

```bash
# æ‰“å¼€ç¬¬ä¸€ä¸ªçª—å£ï¼ˆTODO åˆ—è¡¨ï¼‰
tm list --board

# æ‰“å¼€ç¬¬äºŒä¸ªçª—å£ï¼ˆä»»åŠ¡è¯¦æƒ…ï¼‰
tm show 15 --visual --new-window

# æ‰“å¼€ç¬¬ä¸‰ä¸ªçª—å£ï¼ˆä»£ç å¯¹æ¯”ï¼‰
tm diff main.js --visual --new-window
```

---

### 4. æŒä¹…åŒ–æ˜¾ç¤º

```bash
# å›ºå®šæ˜¾ç¤ºæŸä¸ªè§†å›¾
tm list --board --pin

# å³ä½¿æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œçª—å£ä¹Ÿä¸ä¼šåˆ‡æ¢
tm show 15 --visual
# ä¼šæ‰“å¼€æ–°çª—å£ï¼Œè€Œä¸æ˜¯åˆ‡æ¢å½“å‰çª—å£
```

---

## é…ç½®é€‰é¡¹

### 1. ç«¯å£é…ç½®

```bash
# ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£
tm desktop start --port=8080

# æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®
# ~/.your-cli/config.json
{
  "desktop": {
    "port": 8080
  }
}
```

---

### 2. ä¸»é¢˜é…ç½®

```bash
# åˆ‡æ¢ä¸»é¢˜
tm desktop theme dark
tm desktop theme light

# æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®
{
  "desktop": {
    "theme": "dark"
  }
}
```

---

### 3. è½®è¯¢é—´éš”

```bash
# è°ƒæ•´è½®è¯¢é—´éš”ï¼ˆæ¯«ç§’ï¼‰
tm desktop config --poll-interval=1000

# æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®
{
  "desktop": {
    "pollInterval": 1000
  }
}
```

---

## å¿«æ·é”®

åœ¨ Chrome App çª—å£ä¸­ï¼š

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `F5` | åˆ·æ–°é¡µé¢ |
| `F11` | å…¨å±åˆ‡æ¢ |
| `F12` | æ‰“å¼€ DevTools |
| `Ctrl/Cmd + W` | å…³é—­çª—å£ |
| `Ctrl/Cmd + R` | åˆ·æ–°é¡µé¢ |
| `Ctrl/Cmd + +` | æ”¾å¤§ |
| `Ctrl/Cmd + -` | ç¼©å° |
| `Ctrl/Cmd + 0` | é‡ç½®ç¼©æ”¾ |

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: Chrome çª—å£æ— æ³•æ‰“å¼€

**ç—‡çŠ¶ï¼š**
```bash
tm desktop start
# âš ï¸  æ— æ³•è‡ªåŠ¨æ‰“å¼€ Chromeï¼Œè¯·æ‰‹åŠ¨è®¿é—®: http://localhost:9527
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ Chrome æ˜¯å¦å·²å®‰è£…
2. æ‰‹åŠ¨è®¿é—® http://localhost:9527
3. æˆ–ä½¿ç”¨å…¶ä»–æµè§ˆå™¨ï¼š
   ```bash
   tm desktop start --browser=edge
   tm desktop start --browser=brave
   ```

---

### é—®é¢˜ 2: ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶ï¼š**
```bash
tm desktop start
# Error: listen EADDRINUSE: address already in use :::9527
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ä½¿ç”¨å…¶ä»–ç«¯å£
tm desktop start --port=9528

# æˆ–å…³é—­å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:9527 | xargs kill -9
```

---

### é—®é¢˜ 3: çª—å£æ˜¾ç¤ºç©ºç™½

**ç—‡çŠ¶ï¼š**
- Chrome çª—å£æ‰“å¼€äº†ï¼Œä½†æ˜¯ä¸€ç‰‡ç©ºç™½

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€ DevToolsï¼ˆF12ï¼‰æŸ¥çœ‹é”™è¯¯
2. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š
   ```bash
   curl http://localhost:9527/api/health
   ```
3. åˆ·æ–°é¡µé¢ï¼ˆF5ï¼‰

---

### é—®é¢˜ 4: æ•°æ®ä¸æ›´æ–°

**ç—‡çŠ¶ï¼š**
- æ‰§è¡Œå‘½ä»¤åï¼Œçª—å£å†…å®¹æ²¡æœ‰å˜åŒ–

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥è½®è¯¢æ˜¯å¦æ­£å¸¸ï¼ˆDevTools â†’ Networkï¼‰
2. æ‰‹åŠ¨åˆ·æ–°é¡µé¢
3. é‡å¯æ¡Œé¢ç«¯ï¼š
   ```bash
   tm desktop stop
   tm desktop start
   ```

---

## æ€§èƒ½ä¼˜åŒ–

### 1. å‡å°‘è½®è¯¢é¢‘ç‡

```javascript
// å¦‚æœä¸éœ€è¦å®æ—¶æ›´æ–°ï¼Œå¯ä»¥é™ä½è½®è¯¢é¢‘ç‡
{
  "desktop": {
    "pollInterval": 2000  // 2 ç§’è½®è¯¢ä¸€æ¬¡
  }
}
```

### 2. ä½¿ç”¨ WebSocket

```bash
# å¯ç”¨ WebSocket å®æ—¶é€šä¿¡
tm desktop start --websocket

# é…ç½®æ–‡ä»¶
{
  "desktop": {
    "useWebSocket": true
  }
}
```

### 3. ç¼“å­˜é™æ€èµ„æº

```javascript
// åœ¨ Express ä¸­å¯ç”¨ç¼“å­˜
app.use(express.static('./public', {
  maxAge: '1d'
}));
```

---

## æœ€ä½³å®è·µ

### 1. å·¥ä½œæµå»ºè®®

```bash
# æ—©ä¸Šå¼€å§‹å·¥ä½œ
tm desktop start          # å¯åŠ¨æ¡Œé¢ç«¯
tm list --board           # æŸ¥çœ‹ä»Šå¤©çš„ä»»åŠ¡

# å¼€å‘è¿‡ç¨‹ä¸­
tm show <task-id> --visual  # æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
# ç¼–å†™ä»£ç ...
tm diff --visual            # æŸ¥çœ‹ä»£ç å˜æ›´

# ä¸‹ç­å‰
tm list --board           # æ£€æŸ¥ä»»åŠ¡å®Œæˆæƒ…å†µ
tm desktop stop           # å…³é—­æ¡Œé¢ç«¯
```

### 2. å›¢é˜Ÿåä½œ

```bash
# ä»£ç å®¡æŸ¥
tm diff feature/new-ui --visual
# åœ¨æ¡Œé¢ç«¯æŸ¥çœ‹å˜æ›´ï¼Œåœ¨ç»ˆç«¯å†™è¯„è®º

# ä»»åŠ¡åˆ†é…
tm list --board --filter=unassigned
# åœ¨æ¡Œé¢ç«¯æŸ¥çœ‹æœªåˆ†é…çš„ä»»åŠ¡
```

### 3. æ¼”ç¤ºå±•ç¤º

```bash
# å‡†å¤‡æ¼”ç¤º
tm desktop start --fullscreen
tm list --board

# å±•ç¤ºä»»åŠ¡è¿›åº¦
# å±•ç¤ºä»£ç è´¨é‡
# å±•ç¤ºè®¾è®¡ç¨¿
```

---

## æ€»ç»“

Chrome App Mode çš„ä½¿ç”¨éå¸¸ç®€å•ï¼š

1. **å¯åŠ¨** - `tm desktop start`
2. **ä½¿ç”¨** - åœ¨ä»»ä½•å‘½ä»¤ååŠ  `--visual` æˆ– `--board`
3. **åœæ­¢** - `tm desktop stop`

å…³é”®ä¼˜åŠ¿ï¼š
- âœ… æ— éœ€å­¦ä¹ æ–°å·¥å…·
- âœ… ä¸ç°æœ‰ CLI æ— ç¼é›†æˆ
- âœ… æŒ‰éœ€æ˜¾ç¤ºï¼Œä¸å½±å“ç»ˆç«¯ä½¿ç”¨
- âœ… æ”¯æŒå¤šç§å†…å®¹ç±»å‹
